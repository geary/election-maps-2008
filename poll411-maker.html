// poll411-maker.html
// Copyright 2008 Michael Geary
// http://mg.to/
// Free Beer and Free Speech License (any OSI license)
// http://freebeerfreespeech.org/

::head

<!-- Begin US Voter Info gadget by Google -->
<style type="text/css">
  /* Font */
  #Poll411Gadget { font:{{font}}; }
  /* Sizes */
  #Poll411Gadget { width:{{width}}px; }
  #Poll411Input { width:{{inputWidth}}px; }
  #Poll411Button { width:75px; height:1.85em; }
  #Poll411Frame { width:100%; height:{{height}}px; }
  /* Colors */
  #Poll411Gadget { border:1px solid #AAA; }
  #Poll411Input.example { color:#666; }
  #Poll411Frame { border-top:1px solid #DDD; }
  /* Layout */
  #Poll411Gadget { margin:0; padding:6px; }
  #Poll411Form { margin:0; padding:0; }
  #Poll411Title { float:left; padding-bottom:4px; }
  #Poll411InputBox { float:left; margin-right:6px; }
  #Poll411ButtonBox { float:left; }
  #Poll411Frame { display:none; margin-top:6px; }
</style>

::body

<div id="Poll411Gadget">
  <div id="Poll411Title">
    Find your 2008 voter information. Enter your <strong>home</strong> address:
  </div>
  <div style="clear:both;">
  </div>
  <form id="Poll411Form" onsubmit="return Poll411.submit()">
    <div id="Poll411InputBox">
      <input type="text" id="Poll411Input" class="example" onfocus="Poll411.focus()" onblur="Poll411.blur()" />
    </div>
    <div id="Poll411ButtonBox">
      <button type="submit" id="Poll411Button"> Search</button>
    </div>
  </form>
  <div style="clear:left;">
  </div>
  <div id="Poll411Frame">
  </div>
</div>
<script type="text/javascript">
  (function() {
    function e( id ) { return document.getElementById('Poll411'+id); }
    var label = e('Label'), input = e('Input'), button = e('Button'), frame = e('Frame');
    
    var example = "{{example}}";
    input.value = example;
    
    Poll411 = {
      
      focus: function() {
        if( input.value == example ) {
          input.className = '';
          input.value = '';
        }
      },
      
      blur: function() {
        if( input.value ==  ''  ||  input.value == example ) {
          input.className = 'example';
          input.value = example;
        }
      },
      
      submit: function() {
        frame.style.display = 'block';
        frame.innerHTML = [
          '<iframe ',
            'src="http://www.gmodules.com/ig/ifr?url={{gadget}}&amp;synd=open&amp;nocache=1&amp;up_address=', encodeURIComponent(input.value), '&amp;up_font={{urlfont}}" ',
            'style="width:100%; height:100%;" ',
            'frameborder="0" ',
            'scrolling="no" ',
          '/>'
        ].join('');
        return false;
      }
    };
  })();
</script>
<!-- End US Voter Info gadget by Google -->
